<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Structuring JavaScript</title>
    <meta name='description' content=''>
    <meta name='author' content=''>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="assets/css/tomorrow-night.css">
    <link rel='stylesheet' href='assets/css/main.css'>
     <script src='assets/js/libs/prettify.js'></script>
     <script src='assets/js/libs/moment.js'></script>
  </head>
  <body>
    <div id="wrap" class='clearfix'>
      <header>
        <div class='center'>
          <h1>Give your JS apps some structure.</h1>
          <p>
            closures, namespaces and other tools to keep our code manageable
          </p>
        </div>
      </header>
      <div id="main-content">
        <div class='center'>
          <h1>Simple example of a closure</h1>
          <div id="output"></div>
          <div id="output2"></div>
          <pre class='prettyprint code'>
            // non closure function
            window.onload = function () {
              var output = document.getElementById('output');
              var closure = myClosure();

              output.innerHTML = nonClosure();

              window.setTimeout(function () {
                output.innerHTML += '&lt;br /&gt;' + nonClosure();
              }, 500);


              window.setTimeout(function () {
                output.innerHTML += '&lt;br /&gt;' + closure();
              }, 500);
            };

            function nonClosure () {
              var date = new Date();
              return date.getMilliseconds();
            }

            function myClosure () {
              var date = new Date();
              return function () {
                return date.getMilliseconds();
              };
            }

            // this is another way
            // this is called the revealing module pattern
            window.onload = function () {
            var output  = document.getElementById('output'),
                closure = new myClosure2();

            output.innerHTML = closure.mill();

            window.setTimeout(function () {
              output.innerHTML += '&lt;br&gt;'+closure.mill();
            }, 500);

              // MomentJS date and time function
              var datetime = null,
                    date = null;

              // this is the function that updates the time
              var update = function () {
                // add a Date object to our date variable
                date = moment(new Date());
                // set the datetime variable with jQuery's html to update the DOM with
                // our new formatted date
                datetime.html(date.format('dddd, MMMM Do YYYY, h:mm:ss a'));
              };

                // add the formatted date to the page
                // using jQuery to target a DOM element
                // with an ID of 'datetime'
                datetime = $('#datetime');
                // execute our update function
                update();
                // call our update function every
                // second
                setInterval(update, 1000);
          </pre>
        </div>
      </div>
    </div>

    <footer id="main-footer" class='clearfix'>
      <div class="center">
        <p>Copyright 2014 &copy; Tony Brown Design and Developement</p>
         <p id='datetime'></p>
         <a class='go-top' href="#top">go top</a>
      </div>
    </footer>

    <script src='assets/js/libs/jquery.js'></script>
    <script src='assets/js/libs/underscore.js'></script>
    <script src='assets/js/libs/backbone.js'></script>
    <script src='assets/js/libs/marionette.js'></script>
    <script src='assets/js/app.js'></script>
  </body>
</html>
